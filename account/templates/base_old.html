{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %}</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <!-- stylesheet -->
    <link rel="stylesheet" href="{% static 'css/base.css' %}">

    <!-- iconscout CDN -->
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v2.1.6/css/unicons.css">
</head>
<body>
    <div class="container">
        <header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom">
            <a href="{% url 'dashboard' %}" class="d-flex align-items-center col-md-3 mb-2 mb-md-0 text-dark text-decoration-none">
                <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><h2>Social netw</h2></svg>
            </a>
            {% if request.user.is_authenticated %}
                <ul class="nav col-12 col-md-auto mb-2 justify-content-center mb-md-0" style="font-size: 20px;">
                    <li><a href="{% url 'dashboard' %}" class="nav-link px-2 link-{% if section == 'dashboard' %}secondary{% else %}dark{% endif %}">My dashboard</a></li>
                    <li><a href="{% url 'images:list' %}"" class="nav-link px-2 link-{% if section == 'images' %}secondary{% else %}dark{% endif %}">Images</a></li>
                    <li><a href="{% url 'user_list' %}" class="nav-link px-2 link-{% if section == 'people' %}secondary{% else %}dark{% endif %}">People</a></li>
                </ul>
            {% endif %}

            <div class="col-md-3 text-end">
                {% if request.user.is_authenticated %}
                    <label style="font-size: 20px;">Hello <a href="{{ request.user.get_absolute_url }}">{{ request.user.first_name }}</a>, </label>
                    <a class="btn btn-primary" role="button" aria-pressed="true" href="{% url 'logout' %}">Logout</a>
                {% else %}
                    <a class="btn btn-outline-primary me-2" role="button" aria-pressed="true" href="{% url 'login' %}">Log-in</a>
                    <a class="btn btn-primary" role="button" aria-pressed="true" href="{% url 'register' %}">Sign-up</a>   
                {% endif %}
            </div>
        </header>
    </div>
    
    <div id="content">
        {% if messages %}
            <ul>
                {% for message in messages %}
                    <li class="li_alert">
                        <div class="container mt-5">
                            {% if message.tags == 'success' %}
                                
                                    <div class="col-sm-12">
                                        <div class="alert fade alert-simple alert-success alert-dismissible text-left font__family-montserrat font__size-16 font__weight-light brk-library-rendered rendered show">
                                            <i class="start-icon far fa-check-circle faa-tada animated"></i>
                                            <strong class="font__weight-semibold">Well done!</strong> {{ message }}.
                                            <a class="close" href="#">X</a>
                                        </div>
                                    </div>
                            {% elif message.tags == 'error' %}
                                <div class="col-sm-12">
                                    <div class="alert fade alert-simple alert-danger alert-dismissible text-left font__family-montserrat font__size-16 font__weight-light brk-library-rendered rendered show" role="alert" data-brk-library="component__alert">
                                        <i class="start-icon far fa-times-circle faa-pulse animated"></i>
                                        <strong class="font__weight-semibold">Oh snap!</strong> {{ message }}.
                                        <a class="close" href="#">X</a>
                                    </div>
                                </div>
                            {% endif %}
                        </div>
                        
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
        {% block content %}{% endblock %}
    </div>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<script>
    var csrftoken = Cookies.get('csrftoken');
    function csrfSafeMethod(method) {
        // Для этих методов токен не будет подставляться в заголовок.
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }
    $.ajaxSetup({
        beforeSend: function(xhr, settings) {
        if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
            xhr.setRequestHeader("X-CSRFToken", csrftoken);
        }
        }
    });
    $(document).ready(function(){
    {% block domready %}{% endblock %}
    });
</script>
</html>